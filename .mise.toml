[tools]
# Custom registries are not included in mise-versions
# https://mise-versions.jdx.dev/

# mise registry | grep -i aws
# mise plugins ls-remote | grep aws
# mise ls-remote aws-cli

## Infrastructure tools

# https://github.com/hashicorp/terraform/releases
terraform = "1.14.4"

# https://github.com/gruntwork-io/terragrunt/releases
terragrunt = "0.99.1"

# https://github.com/terraform-linters/tflint/releases
tflint = "latest"

# https://github.com/terraform-docs/terraform-docs/releases
terraform-docs = "latest"

# https://github.com/aws/aws-cli/tags
awscli = "2.33.13"

# https://go.dev/dl/
#go = "1.21.0"

# https://gradle.org/releases/
#gradle = "8.7"

# https://adoptium.net/temurin/releases/
#java = "temurin-25.0.0"

# https://github.com/infracost/infracost
infracost = "latest"

## Security scanning

# https://github.com/aquasecurity/trivy/releases
trivy = "latest"

# https://github.com/bridgecrewio/checkov/releases
"pipx:checkov" = "latest"

# https://github.com/gitleaks/gitleaks/releases
gitleaks = "8.18.4"

## Pre-commit and linting

# https://github.com/pre-commit/pre-commit/releases
pre-commit = "latest"

# https://github.com/errata-ai/vale/releases
vale = "latest"

# https://github.com/commitizen-tools/commitizen/releases
"pipx:commitizen" = "latest"

# https://github.com/pressly/goose/releases
#"aqua:pressly/goose" = "latest"
"go:github.com/pressly/goose/v3/cmd/goose" = "latest"

tfupdate = "latest"
go = "latest"

# https://github.com/igorshubovych/markdownlint-cli/releases
# markdownlint-cli = "latest"

[tasks.pre-commit]
description = "Run pre-commit checks on all files"
run = "pre-commit run --all-files --show-diff-on-failure --color=always"

[tasks.test-migrations]
description = "Test Goose DB migrations against local PostgreSQL in Docker"
run = "./scripts/tests/goose-migrations.sh"

[tasks.test-migrations-keep]
description = "Test migrations and keep PostgreSQL container running"
run = "KEEP_CONTAINER=true ./scripts/tests/goose-migrations.sh"
